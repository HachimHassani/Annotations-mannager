{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nexports.__esModule = true;\nvar react_1 = __importDefault(require(\"react\"));\nvar Mark_1 = __importDefault(require(\"./Mark\"));\nvar utils_1 = require(\"./utils\");\nvar Token = function (props) {\n  return react_1[\"default\"].createElement(\"span\", {\n    \"data-i\": props.i\n  }, props.content, \" \");\n};\nvar TokenAnnotator = function (props) {\n  var renderMark = props.renderMark || function (props) {\n    return react_1[\"default\"].createElement(Mark_1[\"default\"], __assign({}, props));\n  };\n  var getSpan = function (span) {\n    if (props.getSpan) return props.getSpan(span);\n    return {\n      start: span.start,\n      end: span.end\n    };\n  };\n  var handleMouseUp = function () {\n    var _a;\n    if (!props.onChange) return;\n    var selection = window.getSelection();\n    if (utils_1.selectionIsEmpty(selection)) return;\n    if (!selection.anchorNode.parentElement.hasAttribute('data-i') || !selection.focusNode.parentElement.hasAttribute('data-i')) {\n      window.getSelection().empty();\n      return false;\n    }\n    var start = parseInt(selection.anchorNode.parentElement.getAttribute('data-i'), 10);\n    var end = parseInt(selection.focusNode.parentElement.getAttribute('data-i'), 10);\n    if (utils_1.selectionIsBackwards(selection)) {\n      ;\n      _a = [end, start], start = _a[0], end = _a[1];\n    }\n    end += 1;\n    props.onChange(__spreadArrays(props.value, [getSpan({\n      start: start,\n      end: end,\n      tokens: props.tokens.slice(start, end)\n    })]));\n    window.getSelection().empty();\n  };\n  var handleSplitClick = function (_a) {\n    var start = _a.start,\n      end = _a.end;\n    // Find and remove the matching split.\n    var splitIndex = props.value.findIndex(function (s) {\n      return s.start === start && s.end === end;\n    });\n    if (splitIndex >= 0) {\n      props.onChange(__spreadArrays(props.value.slice(0, splitIndex), props.value.slice(splitIndex + 1)));\n    }\n  };\n  var tokens = props.tokens,\n    value = props.value,\n    onChange = props.onChange,\n    _ = props.getSpan,\n    divProps = __rest(props, [\"tokens\", \"value\", \"onChange\", \"getSpan\"]);\n  var splits = utils_1.splitTokensWithOffsets(tokens, value);\n  return react_1[\"default\"].createElement(\"div\", __assign({}, divProps, {\n    onMouseUp: handleMouseUp\n  }), splits.map(function (split, i) {\n    return split.mark ? renderMark(__assign(__assign({\n      key: split.start + \"-\" + split.end\n    }, split), {\n      onClick: handleSplitClick\n    })) : react_1[\"default\"].createElement(Token, __assign({\n      key: split.i\n    }, split));\n  }));\n};\nexports[\"default\"] = TokenAnnotator;","map":{"version":3,"names":["react_1","__importDefault","require","Mark_1","utils_1","Token","props","createElement","i","content","TokenAnnotator","renderMark","__assign","getSpan","span","start","end","handleMouseUp","onChange","selection","window","getSelection","selectionIsEmpty","anchorNode","parentElement","hasAttribute","focusNode","empty","parseInt","getAttribute","selectionIsBackwards","_a","__spreadArrays","value","tokens","slice","handleSplitClick","splitIndex","findIndex","s","_","divProps","__rest","splits","splitTokensWithOffsets","onMouseUp","map","split","mark","key","onClick","exports"],"sources":["C:\\Users\\msi\\Documents\\React-TS-login-using-jwt\\node_modules\\react-text-annotate\\src\\TokenAnnotator.tsx"],"sourcesContent":["import React from 'react'\n\nimport Mark, {MarkProps} from './Mark'\nimport {selectionIsEmpty, selectionIsBackwards, splitTokensWithOffsets} from './utils'\nimport {Span} from './span'\n\ninterface TokenProps {\n  i: number\n  content: string\n}\n\ninterface TokenSpan {\n  start: number\n  end: number\n  tokens: string[]\n}\n\nconst Token: React.SFC<TokenProps> = props => {\n  return <span data-i={props.i}>{props.content} </span>\n}\n\nexport interface TokenAnnotatorProps<T>\n  extends Omit<React.HTMLAttributes<HTMLDivElement>, 'onChange'> {\n  tokens: string[]\n  value: T[]\n  onChange: (value: T[]) => any\n  getSpan?: (span: TokenSpan) => T\n  renderMark?: (props: MarkProps) => JSX.Element\n  // TODO: determine whether to overwrite or leave intersecting ranges.\n}\n\nconst TokenAnnotator = <T extends Span>(props: TokenAnnotatorProps<T>) => {\n  const renderMark = props.renderMark || (props => <Mark {...props} />)\n\n  const getSpan = (span: TokenSpan): T => {\n    if (props.getSpan) return props.getSpan(span)\n    return {start: span.start, end: span.end} as T\n  }\n\n  const handleMouseUp = () => {\n    if (!props.onChange) return\n\n    const selection = window.getSelection()\n\n    if (selectionIsEmpty(selection)) return\n\n    if (\n      !selection.anchorNode.parentElement.hasAttribute('data-i') ||\n      !selection.focusNode.parentElement.hasAttribute('data-i')\n    ) {\n      window.getSelection().empty()\n      return false\n    }\n\n    let start = parseInt(selection.anchorNode.parentElement.getAttribute('data-i'), 10)\n    let end = parseInt(selection.focusNode.parentElement.getAttribute('data-i'), 10)\n\n    if (selectionIsBackwards(selection)) {\n      ;[start, end] = [end, start]\n    }\n\n    end += 1\n\n    props.onChange([...props.value, getSpan({start, end, tokens: props.tokens.slice(start, end)})])\n    window.getSelection().empty()\n  }\n\n  const handleSplitClick = ({start, end}) => {\n    // Find and remove the matching split.\n    const splitIndex = props.value.findIndex(s => s.start === start && s.end === end)\n    if (splitIndex >= 0) {\n      props.onChange([...props.value.slice(0, splitIndex), ...props.value.slice(splitIndex + 1)])\n    }\n  }\n\n  const {tokens, value, onChange, getSpan: _, ...divProps} = props\n  const splits = splitTokensWithOffsets(tokens, value)\n  return (\n    <div {...divProps} onMouseUp={handleMouseUp}>\n      {splits.map((split, i) =>\n        split.mark ? (\n          renderMark({\n            key: `${split.start}-${split.end}`,\n            ...split,\n            onClick: handleSplitClick,\n          })\n        ) : (\n          <Token key={split.i} {...split} />\n        )\n      )}\n    </div>\n  )\n}\n\nexport default TokenAnnotator\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}